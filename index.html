<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roth Conversion Quiz | August So Financial Growth Group</title>
<meta name="description" content="Take this 60-second Roth Conversion Readiness Quiz to see if converting now could reduce future taxes and improve retirement flexibility.">

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f8fb;
        color: #333;
    }
    header {
        text-align: center;
        background-color: #004080;
        color: white;
        padding: 20px;
    }
    header img {
        max-width: 120px;
        display: block;
        margin: 0 auto 10px;
    }
    .container {
        max-width: 800px;
        margin: 30px auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
        color: #004080;
        text-align: center;
    }
    .question {
        margin-bottom: 20px;
    }
    .question h3 {
        margin-bottom: 10px;
        color: #006644;
    }
    label {
        display: block;
        padding: 8px;
        background: #f0f4f8;
        margin-bottom: 6px;
        border-radius: 5px;
        cursor: pointer;
    }
    input[type="radio"] {
        margin-right: 10px;
    }
    button {
        background-color: #004080;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        display: block;
        margin: 20px auto;
    }
    button:hover {
        background-color: #0066cc;
    }
    .loader {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
    }
    .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #004080;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 9998;
    }
</style>
</head>
<body>

<header>
    <img src="fgg_logo.png" alt="August So - Financial Growth Group">
    <h2>August So - Financial Growth Group</h2>
</header>

<div class="container">
    <h1>Is a Roth Conversion Right for You?</h1>
    <p style="text-align:center; font-size:16px; color:#555;">Take this 60-second quiz to see if converting now could help reduce future taxes.</p>
    
    <form id="quizForm">
        <div class="question">
            <h3>1. Did you know you may be able to save up to 50% of the cost of the taxes on your Roth conversion?</h3>
            <label><input type="radio" name="qA" value="1"> Yes</label>
            <label><input type="radio" name="qA" value="0"> No</label>
        </div>

        <div class="question">
            <h3>2. What is your approximate IRA or pre-tax retirement balance?</h3>
            <label><input type="radio" name="qB" value="4"> Under $100,000</label>
            <label><input type="radio" name="qB" value="6"> $100,000 – $250,000</label>
            <label><input type="radio" name="qB" value="8"> $250,000 – $500,000</label>
            <label><input type="radio" name="qB" value="10"> $500,000+</label>
        </div>

        <div class="question">
            <h3>3. Do you expect your tax rate to be higher in retirement than it is today?</h3>
            <label><input type="radio" name="q1" value="4"> Definitely higher</label>
            <label><input type="radio" name="q1" value="3"> Slightly higher</label>
            <label><input type="radio" name="q1" value="2"> About the same</label>
            <label><input type="radio" name="q1" value="1"> Lower</label>
        </div>

        <div class="question">
            <h3>4. How will you pay the taxes on a Roth conversion?</h3>
            <label><input type="radio" name="q2" value="4"> With extra cash savings</label>
            <label><input type="radio" name="q2" value="3"> From taxable investment accounts</label>
            <label><input type="radio" name="q2" value="2"> From retirement funds being converted</label>
            <label><input type="radio" name="q2" value="1"> Not sure</label>
        </div>

        <div class="question">
            <h3>5. When do you plan to start withdrawing from retirement accounts?</h3>
            <label><input type="radio" name="q3" value="4"> 10+ years from now</label>
            <label><input type="radio" name="q3" value="3"> 5–10 years from now</label>
            <label><input type="radio" name="q3" value="2"> Less than 5 years from now</label>
            <label><input type="radio" name="q3" value="1"> Already withdrawing</label>
        </div>

        <div class="question">
            <h3>6. How important is it for you to reduce Required Minimum Distributions (RMDs) later in life?</h3>
            <label><input type="radio" name="q4" value="4"> Very important</label>
            <label><input type="radio" name="q4" value="3"> Somewhat important</label>
            <label><input type="radio" name="q4" value="2"> Not very important</label>
            <label><input type="radio" name="q4" value="1"> Not sure</label>
        </div>

        <div class="question">
            <h3>7. How do you expect your investments to perform in the coming years?</h3>
            <label><input type="radio" name="q5" value="4"> Strong growth</label>
            <label><input type="radio" name="q5" value="3"> Moderate growth</label>
            <label><input type="radio" name="q5" value="2"> Minimal growth</label>
            <label><input type="radio" name="q5" value="1"> Possible decline</label>
        </div>

        <div class="question">
            <h3>8. What percentage of your retirement savings is in pre-tax accounts (401k, Traditional IRA)?</h3>
            <label><input type="radio" name="q6" value="4"> Over 75%</label>
            <label><input type="radio" name="q6" value="3"> 50–75%</label>
            <label><input type="radio" name="q6" value="2"> 25–50%</label>
            <label><input type="radio" name="q6" value="1"> Less than 25%</label>
        </div>

        <div class="question">
            <h3>9. How important is leaving tax-free assets to heirs?</h3>
            <label><input type="radio" name="q7" value="4"> Very important</label>
            <label><input type="radio" name="q7" value="3"> Somewhat important</label>
            <label><input type="radio" name="q7" value="2"> Not important</label>
            <label><input type="radio" name="q7" value="1"> Not sure</label>
        </div>

        <div class="question">
            <h3>10. Do you anticipate any unusually high-income years soon?</h3>
            <label><input type="radio" name="q8" value="4"> Yes, definitely</label>
            <label><input type="radio" name="q8" value="3"> Possibly</label>
            <label><input type="radio" name="q8" value="2"> No</label>
            <label><input type="radio" name="q8" value="1"> Not sure</label>
        </div>

        <div class="question">
            <h3>11. How comfortable are you with paying taxes now to save more later?</h3>
            <label><input type="radio" name="q9" value="4"> Very comfortable</label>
            <label><input type="radio" name="q9" value="3"> Somewhat comfortable</label>
            <label><input type="radio" name="q9" value="2"> Not comfortable</label>
            <label><input type="radio" name="q9" value="1"> Not sure</label>
        </div>

        <div class="question">
            <h3>12. Have you explored Roth conversions with a financial professional before?</h3>
            <label><input type="radio" name="q10" value="4"> Yes, done detailed analysis</label>
            <label><input type="radio" name="q10" value="3"> Yes, but only brief discussion</label>
            <label><input type="radio" name="q10" value="2"> No, but interested</label>
            <label><input type="radio" name="q10" value="1"> No, not interested</label>
        </div>

        <button type="button" onclick="calculateScore()" id="submitBtn">See My Results</button>
    </form>

    <div class="overlay" id="overlay"></div>
    <div class="loader" id="loader">
        <div class="spinner"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
// Initialize EmailJS
(function(){
    emailjs.init('vMiHr5c9aL7jTaGJn');
})();

function calculateScore() {
    let totalScore = 0;
    let answers = {};

    const qA = document.querySelector('input[name="qA"]:checked');
    const qB = document.querySelector('input[name="qB"]:checked');

    if (!qA || !qB) {
        alert("Please answer all questions before submitting.");
        return;
    }

    totalScore += parseInt(qA.value);
    totalScore += parseInt(qB.value);
    answers.qA = qA.parentElement.textContent.trim();
    answers.qB = qB.parentElement.textContent.trim();

    for (let i = 1; i <= 10; i++) {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        if (!selected) {
            alert("Please answer all questions before submitting.");
            return;
        }
        totalScore += parseInt(selected.value);
        answers[`q${i}`] = selected.parentElement.textContent.trim();
    }

    const maxScore = 51;
    const normalizedScore = Math.round((totalScore / maxScore) * 100);
    const leadData = JSON.parse(localStorage.getItem("leadData")) || {};
    const leadId = localStorage.getItem("leadId") || "unknown";

    const submitBtn = document.getElementById("submitBtn");
    const loader = document.getElementById("loader");
    const overlay = document.getElementById("overlay");
    submitBtn.disabled = true;
    loader.style.display = "block";
    overlay.style.display = "block";

    // Save quiz results locally
    localStorage.setItem("quizResults", JSON.stringify({
        leadId,
        score: normalizedScore,
        answers
    }));

    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxAYR-ftM1anBCEQVqt4uCUO_wJi2UnflONOoyjiFSIz94rl_knduOmDvQFCHM0IFtx/exec";

    // Payload for Google Sheets
    const scriptPayload = {
        type: 'quiz',
        leadId: leadId,
        name: leadData.name || "",
        state: leadData.state || "",
        phone: leadData.phone || "",
        email: leadData.email || "",
        score: normalizedScore,
        q1: answers.qA,
        q2: answers.qB,
        q3: answers.q1,
        q4: answers.q2,
        q5: answers.q3,
        q6: answers.q4,
        q7: answers.q5,
        q8: answers.q6,
        q9: answers.q7,
        q10: answers.q8,
        q11: answers.q9,
        q12: answers.q10
    };

    // Payload for EmailJS
    const emailPayload = {
        leadId: leadId,
        name: leadData.name || "",
        email: leadData.email || "",
        phone: leadData.phone || "",
        state: leadData.state || "",
        score: normalizedScore,
        qA: answers.qA,
        qB: answers.qB,
        q1: answers.q1,
        q2: answers.q2,
        q3: answers.q3,
        q4: answers.q4,
        q5: answers.q5,
        q6: answers.q6,
        q7: answers.q7,
        q8: answers.q8,
        q9: answers.q9,
        q10: answers.q10
    };

    // Send to Google Sheets using no-cors (data will be sent but we can't read response)
    fetch(SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'text/plain' },
        body: JSON.stringify(scriptPayload)
    }).catch(err => console.log('Sheet POST attempt:', err));

    // Send email via EmailJS
    const emailPromise = emailjs.send("service_ywrmw2f", "template_m7e9oh9", emailPayload)
        .then(() => console.log('Email sent successfully'))
        .catch(err => console.error('Email failed:', err));

    // Wait a bit for requests to complete, then redirect
    Promise.allSettled([emailPromise]).finally(() => {
        setTimeout(() => {
            window.location.href = `results.html?score=${normalizedScore}`;
        }, 1000);
    });
}
</script>

</body>
</html>